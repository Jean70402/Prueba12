<!DOCTYPE html>
<html>
<head>
    <title>Mi página web</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
</head>
<body>
    <header>
        <div class="img-1">
            <img src="logo.png" alt="Descripción de la imagen" >
        </div>
    </header>
    
    <nav>
        <ul>
            <li><a href="#">Inicio</a></li>
            <li><a href="#">Acerca de</a></li>
            <li><a href="#">Servicios</a></li>
            <li><a href="#">Contacto</a></li>
        </ul>
    </nav>

    <div class="upper-img">
        <div class="img-1">
          <img src="1.jpg" alt="Descripción de la imagen">
          <div class="caption">
            <p>Obra 1</p>
            <button>Ver  más!</button>
          </div>
        </div>
        <div class="img-2">
          <img width="400" src="2.jpg" alt="Descripción de la imagen">
          <div class="caption">
            <p>Obra 2</p>
            <button>Ver  más!</button>
          </div>
        </div>
        <div class="img-3">
          <img width="400" src="3.jpg" alt="Descripción de la imagen">
          <div class="caption">
            <p>Obra 3</p>
            <button>Ver  más!</button>
          </div>
        </div>
      </div>
      
      <div>
        <!-- Agrega el formulario -->
<form id="subscribeForm">
  <label for="nombre">Nombre: </label>
  <input type="text" id="nombre" placeholder="Tu nombre" required>
  <p></p>
  <label for="carrera">Carrera  : </label>
  <input type="text" id="carrera" placeholder="Tu carrera" required>
  <p></p>
  <label for="primero">Horario 1:</label>
  <input type="radio" name="Horario" value="primero" id="horario">
  <label for="segundo">Horario 2:</label>
  <input type="radio" name="Horario" value="segundo" id="horario">
  <label for="tercero">Horario 3:</label>
  <input type="radio" name="Horario" value="tercero" id="horario">
  
  <p></p>
  <label for="email">Correo: </label>
  <input type="email" id="email" placeholder="Tu correo electrónico" required>
  
  <button type="submit">Enviar</button>
</form>

<!-- Agrega el contador -->
<div id="subscriberCount">Cargando contador...</div>

<script>
  // Inicializa Firebase
    const firebaseConfig = {
    apiKey: "AIzaSyAUKjav9A7foqkSBvMmfh3TgF5CczBBQnM",
    authDomain: "viewart-c6099.firebaseapp.com",
    databaseURL: "https://viewart-c6099-default-rtdb.firebaseio.com",
    projectId: "viewart-c6099",
    storageBucket: "viewart-c6099.appspot.com",
    messagingSenderId: "529881475475",
    appId: "1:529881475475:web:e072f99e94de3fe7cf2066",
    measurementId: "G-N6LD91DPEZ"
  };
  const app = firebase.initializeApp(firebaseConfig);

  // Referencia a la ubicación del contador en Firebase Realtime Database
  var subscribersRef = firebase.database().ref("subscribers");

  // Manejar el envío del formulario
  var subscribeForm = document.getElementById("subscribeForm");

  // Definir la variable count en un alcance más alto
  var count = 0;

  // Mostrar el contador en tiempo real
  subscribersRef.on("value", function (snapshot) {
    count = snapshot.numChildren();
    if (count <= 30) {
      document.getElementById("subscriberCount").textContent =
        "Número de inscritos: " + count;
      // Habilitar el envío del formulario
      subscribeForm.removeAttribute("disabled");
    } else {
      document.getElementById("subscriberCount").textContent =
        "Cupos llenos";
      // Deshabilitar el envío del formulario
      subscribeForm.setAttribute("disabled", "true");
    }
  });

  // Manejar el envío del formulario
  subscribeForm.addEventListener("submit", function (event) {
    event.preventDefault();

    var email = document.getElementById("email").value;
    var nombre = document.getElementById("nombre").value;
    var carrera = document.getElementById("carrera").value;
    var horario = document.getElementById("horario").value;

    // Verificar si todos los campos están completos
    if (
      email.trim() !== "" &&
      nombre.trim() !== "" &&
      carrera.trim() !== "" &&
      horario.trim() !== ""
    ) {
      // Añadir todos los campos a la base de datos en una sola inserción
      subscribersRef.push().set({
        email: email,
        nombre: nombre,
        carrera: carrera,
        horario: horario
      });

      // Limpiar los campos después de enviar
      document.getElementById("email").value = "";
      document.getElementById("nombre").value = "";
      document.getElementById("carrera").value = "";
      document.getElementById("horario").value = "";
    } else {
      alert("Completa todos los campos antes de enviar el formulario.");
    }
  });
</script>


      </div>
    <section>
        <h2>Acerca de</h2>
        <p>Somos ViewArt Uce</p>
    </section>
    
    <section>
        <h2>Servicios</h2>
        <ul>
            <li>Servicio 1</li>
            <li>Servicio 2</li>
            <li>Servicio 3</li>
        </ul>
    </section>
    
    <div class="wrapper">
         <div class="button">
            <div class="icon">
                <a href="https://www.facebook.com/profile.php?id=100093685544547&mibextid=ZbWKwL" target="_blank">
                <i class="fab fa-facebook-f"></i>
            </a>
            </div>
            <span>
                <a href="https://www.facebook.com/profile.php?id=100093685544547&mibextid=ZbWKwL" target="_blank">Facebook</a>
                </span>
         </div>
         <div class="button">
            <div class="icon">
                <a href="https://www.instagram.com/viewart_uce/?igshid=MzRlODBiNWFlZA%3D%3D" target="_blank">
               <i class="fab fa-instagram"></i>
            </a>
            </div>
            <span><a href="https://www.instagram.com/viewart_uce/?igshid=MzRlODBiNWFlZA%3D%3D" target="_blank">Instagram</a></span>
         </div>
         <div class="button">
            <div class="icon">
                <a href="https://www.tiktok.com/@viewartuce?_t=8dfytqmgajg&_r=1" target="_blank">
               <i class="fab fa-tiktok"></i>
                </a>
            </div>
            <span><a href="https://www.tiktok.com/@viewartuce?_t=8dfytqmgajg&_r=1" target="_blank">TikTok</a></span>
         </div>
      </div>
      
    <footer>
        <p>Derechos de autor &copy; 2023 Elaborado por Doménica Buitrón</p>
    </footer>
</body>
</html>
